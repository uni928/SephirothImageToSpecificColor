<html lang="ja">
<head>
    <title>画像を洋色のみの構成にするサイト | Gifted Style</title>
    <meta name="description" content="画像を洋色のみの構成にするサイトです。"/>
    <style>
.progress {
  border-radius: 30px;
  height: 40px;
  background: #ddd;
  overflow: hidden;
}
.bar {
  background: #FFC100;
  border-radius: inherit;
  height: 100%;
  width: 0%;
  transition: 2s;
}
    </style>
</head>
<body>
<img src="" id="preview">
<canvas id="canvas"></canvas></br>
<input type="file" accept="image/*" id="getfile"></br>
<div class="progress">
  <div class="bar" id="Bar"></div>
</div></br></br>
このサイトは画像を洋色のみにした場合に</br>
どんな見た目になるかどうかを軽くチェックするサイトです。</br></br>
画像ファイルを選択すると</br>
左右にその画像が展開されます。</br>
そして右側の画像が洋色に変換されていきます。</br></br>
境界線が乱れるため</br>
このサイトで変換した物を</br>
完成品にするのは難しいですが</br>
画像を修正する際の指標にする事ができます。</br></br>
<a href="https://www.colordic.org/y" target="_blank">このサイト</a> に載っているいずれかの色に変換します。
<script>

function MyThread(i, ctx, canvas) {
for(let j = 0; j < canvas.height; j++) {
          const imageData = ctx.getImageData(i, j, 1, 1);
          let r = imageData.data[0];
          let g = imageData.data[1];
          let b = imageData.data[2];
          let a = imageData.data[3];
          let array = ["#ef857d" ,"#ffedab" ,"#a3d6cc" ,"#8d93c8" ,"#e3acae" ,"#ea5550" ,"#fff3b8" ,"#00947a" ,"#a4a8d4" ,"#e6c0c0" ,"#ea5550" ,"#fdd35c" ,"#00ac97" ,"#4d4398" ,"#ffffff" ,"#ea5549" ,"#e9bc00" ,"#00ac9a" ,"#5a4498" ,"#fafdff" ,"#ea553a" ,"#fcc800" ,"#00a497" ,"#9079b6" ,"#fef9fb" ,"#ea5532" ,"#e3d7a3" ,"#2cb4ad" ,"#47266e" ,"#fffff9" ,"#ed6d35" ,"#ece093" ,"#418b89" ,"#56256e" ,"#fff9f5" ,"#ed6d46" ,"#edde7b" ,"#3c7170" ,"#915da3" ,"#f7f6fb" ,"#bd6856" ,"#c1ab05" ,"#006a6c" ,"#c7a5cc" ,"#f7f6f5" ,"#98605e" ,"#72640c" ,"#88bfbf" ,"#d1bada" ,"#f8f4e6" ,"#6b3f31" ,"#665a1a" ,"#67b5b7" ,"#cab8d9" ,"#f5ecf4" ,"#6c3524" ,"#ffdc00" ,"#009e9f" ,"#b79fcb" ,"#efefef" ,"#6a1917" ,"#ffdc00" ,"#009b9f" ,"#a688bd" ,"#e8ece9" ,"#622d18" ,"#eddc44" ,"#00a3a7" ,"#9b72b0" ,"#eeeaec" ,"#7b5544" ,"#fff799" ,"#25b7c0" ,"#7f1184" ,"#eee9e6" ,"#8f6552" ,"#fff462" ,"#00afcc" ,"#6b395f" ,"#eee7e0" ,"#bb5535" ,"#fff462" ,"#82cddd" ,"#6c2463" ,"#ede4e1" ,"#e6bfb2" ,"#fff352" ,"#a1d8e2" ,"#841a75" ,"#e6eae6" ,"#e8d3ca" ,"#e0de94" ,"#a1d8e6" ,"#9a0d7c" ,"#eae8e1" ,"#f3a68c" ,"#e3e548" ,"#008db7" ,"#a50082" ,"#d3d6dd" ,"#e29676" ,"#eaeea2" ,"#007199" ,"#af0082" ,"#d4d9df" ,"#e6bfab" ,"#e6eb94" ,"#006888" ,"#9f166a" ,"#d4d9dc" ,"#fbdac8" ,"#d9e367" ,"#00608d" ,"#d9aacd" ,"#d4dcd3" ,"#fdede4" ,"#d1de4c" ,"#0073a8" ,"#e0b5d3" ,"#dcd6d2" ,"#fce4d6" ,"#5f6527" ,"#bbe2f1" ,"#e6afcf" ,"#d3d3d8" ,"#e17b34" ,"#777e41" ,"#a0d8ef" ,"#da81b2" ,"#d4d9d6" ,"#bc611e" ,"#7b8d42" ,"#719bad" ,"#d04f97" ,"#cbd0d3" ,"#f6b483" ,"#9cbb1c" ,"#00a1e9" ,"#e4007f" ,"#bcbace" ,"#be8f68" ,"#9fc24d" ,"#409ecc" ,"#e62f8b" ,"#c9caca" ,"#bf783e" ,"#f0f6da" ,"#68a9cf" ,"#c70067" ,"#c9c9c4" ,"#e9dacb" ,"#dbebc4" ,"#88b5d3" ,"#941f57" ,"#c9c9c2" ,"#fbd8b5" ,"#618e34" ,"#a4c1d7" ,"#d83473" ,"#c0c5c2" ,"#946c45" ,"#65ab31" ,"#bbdbf3" ,"#dc6b9a" ,"#bfbec5" ,"#ee7800" ,"#a7d28d" ,"#006eb0" ,"#de82a7" ,"#8da0b6" ,"#f7b977" ,"#578a3d" ,"#0068b7" ,"#e3adc1" ,"#b4aeb1" ,"#c2894b" ,"#417038" ,"#0068b7" ,"#debecc" ,"#b5b5ae" ,"#ac6b25" ,"#387d39" ,"#0075c2" ,"#e5c1cd" ,"#abb1b5" ,"#e8c59c" ,"#bee0c2" ,"#0075c2" ,"#eb6ea0" ,"#b4ada9" ,"#c49a6a" ,"#79c06e" ,"#4496d3" ,"#e95388" ,"#afafb0" ,"#6f5436" ,"#89c997" ,"#68a4d9" ,"#ea618e" ,"#aaaab0" ,"#866629" ,"#37a34a" ,"#bcc7d7" ,"#b0778c" ,"#abb1ad" ,"#fad09e" ,"#009944" ,"#bccddb" ,"#6e4a55" ,"#9fa09e" ,"#f6ae54" ,"#bee0ce" ,"#b2cbe4" ,"#b33e5c" ,"#9d8e87" ,"#f3981d" ,"#a4d5bd" ,"#a2c2e6" ,"#942343" ,"#9f9f98" ,"#f39800" ,"#004d25" ,"#a3b9e0" ,"#c82c55" ,"#898989" ,"#f6e5cc" ,"#3cb37a" ,"#94adda" ,"#e73562" ,"#898880" ,"#eae1cf" ,"#00984f" ,"#7a99cf" ,"#e73562" ,"#7e837f" ,"#ba8b40" ,"#009854" ,"#6c9bd2" ,"#d70035" ,"#7d7b83" ,"#c5a05a" ,"#00a960" ,"#001e43" ,"#e8383d" ,"#7d7d7d" ,"#caac71" ,"#00a968" ,"#202f55" ,"#6c2735" ,"#736d71" ,"#fac559" ,"#288c66" ,"#192f60" ,"#6c272d" ,"#666c67" ,"#e5a323" ,"#00885a" ,"#192f60" ,"#da536e" ,"#626063" ,"#c4972f" ,"#006948" ,"#043c78" ,"#e95464" ,"#594e52" ,"#f2d58a" ,"#005c42" ,"#003f8e" ,"#f19ca7" ,"#4e454a" ,"#eedcb3" ,"#00533f" ,"#26499d" ,"#f5b2b2" ,"#504946" ,"#ead7a4" ,"#54917f" ,"#4753a2" ,"#f5b2ac" ,"#24140e" ,"#ffe9a9" ,"#a5c9c1" ,"#434da2" ,"#e29399" ,"#000000"];

    let result = "";
    let resultR = 0;
    let resultG = 0;
    let resultB = 0;
    let point = 1000000;
    
    array.forEach(function(one){
      let r2 = parseInt(one.substring(1, 3), 16);
      let g2 = parseInt(one.substring(3, 5), 16);
      let b2 = parseInt(one.substring(5, 7), 16);

      let targetPoint = Math.abs(r - r2) + Math.abs(g - g2) + Math.abs(b - b2);
      if(targetPoint < point) {
        point = targetPoint;
        result = one;
        resultR = r2;
        resultG = g2;
        resultB = b2;
      }
    });
    ctx.fillStyle = "rgba(" + resultR + "," + resultG + "," + resultB + "," + a / 255 + ")";
    ctx.fillRect(i, j, 1, 1);
}

        const diff = canvas.width - i;
    	const widthPercentage = (i / canvas.width) * 100;
    	document.getElementById('Bar').style.width = widthPercentage + '%';
}

var file = document.querySelector('#getfile');

file.onchange = function (){
  var fileList = file.files;
  //読み込み
  var reader = new FileReader();
  reader.readAsDataURL(fileList[0]); 

  //読み込み後
  reader.onload = function  () {
    document.querySelector('#preview').src = reader.result;

    const image = document.getElementById('preview');
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d', { willReadFrequently: true });
image.onload = function() {
    canvas.width = image.width;
    canvas.height = image.height;
    ctx.drawImage(image, 0, 0);
setTimeout(() => {
  for(let i = 0; i < canvas.width; i++) {
    setTimeout(() => {
      MyThread(i, ctx, canvas);
    }, 0);
  };
}, 0);
};
};
};


</script> 
</body>
</html>
